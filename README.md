[![repo standards badge](https://img.shields.io/badge/dynamic/json?color=blue&style=flat&logo=github&labelColor=32393F&label=MoJ%20Compliant&query=%24.result&url=https%3A%2F%2Foperations-engineering-reports.cloud-platform.service.justice.gov.uk%2Fapi%2Fv1%2Fcompliant_public_repositories%2Fstaff-device-dhcp-server)](https://operations-engineering-reports.cloud-platform.service.justice.gov.uk/public-github-repositories.html#staff-device-dhcp-server "Link to report")

# Overview

This repository contains the Dockerfile to create the [ISC Kea](https://www.isc.org/kea/) DHCP server docker image. The configuration for this server is managed in the [Admin Portal](https://github.com/ministryofjustice/staff-device-dns-dhcp-admin).

The image is published to [Amazon Web Services ECR](https://aws.amazon.com/ecr/).

## High level diagram
[![](https://mermaid.ink/img/pako:eNq9Vm1PGzkQ_ivW9ksRu9leQo82OiFR3so1R3MsLdIBqia2N3Hj2CvbS5oS_vuNYy9LoEhIJy4fovHs-Jn3Z_cmoZrxpJ-UUs_pBIwjg9NLdakI_sL_57IUlH_7Yrl5XUK_hKxGkfwxMvkO-Uv_GQwEyKAK5uRLa7MHI8nZBsmyneWwNpXkQbUkg92TrJgLRyc3AXlUC8mEGoebA00bVLJrOESRnHA312YajwHgtgmaSkGnZPe8yM6OzsllMnGusv08Hws3qUcdqmf5TChhnVno8nttHUabM15JvZhx5TI3nl8mAaoNz8dOluR4GH1-5LLiZvlVM8jOd09ex8KAMXpuM5Au2PnnpVY8nNAwCBsbAX8FenxUNHXSSnHqxLVwC69-CvVYOW4Uj6cjcHwOC1Jwc-0Lv-YhFMO7aAvBLJvp7x1wEqwVoDoIlc_FVOS2AsptPjw7G54ff8orGOOpu7X9duvtu-2t7bxxvBl9bkafm-igqZn35Rv9dXjyIC2tltiRi5CTAcX0rOnteUHOUGPFek5XAdL3MUDuNRecAzrx7Vr6Rp8MPjwFuzYqAw0sSB9AgqLcRA8RxHs52CsiFq1H3AbzQzBjDCnAHmDdcGja7BwIdTfsa22I8Lgkn7P9j3vD31YtP91vXDBwMAIbrf2DZq0Wxd-DKO-vG4VCYepEctTahz66_4OP3sv5wPqvwNua3WtHSzrhWTwfF3vZp4PdeKJNR67u74DHfSYZWAdlmTHu-5gxZTM2oVUmVGmw8aamrja8GfdH4XafH-4T8T6C7P0nyF-MYLZT9JBq6ZS7i6JHPqykpksetBCOE1wlUlBdNUtAjjgi4howUhpcsqE2DuSvxu8l8Xsvgx-GJKjuc6XvvB8BYDgnndVkdGxY8U6cl85YX3fqaY5mfioCHiBhS41kpC48DYUABisFOeVjJMOGpK5BSBgJiaRP_rl7V_A6m3Prsu5afC3qvRhR2YEZ_NRqNc8w0rXLUJmPpR6BfDC4uVl5t9_gZ94MMfVvgn1eenxSCin7rw4P379_8ybFa3rK-696vV6Us7lgbtLvVj_u3fUUnUYSTXF-03bcWrHbir30UJs5GMaNTZEt0kGNZJ626aV3DfYxBU_8h3_7YEKx_vbiIGoa6q2rSgpu4oqAwvcXW2Plqwf5PoLMqJa6NrEI77Z4j_3-7CI8QkvbD4i0-VR40meSJjNuZiAYfo3deNzLxE34DKmmjyLjJdTS-ZbdomldIefyAyacNgmSg7Q8TaB2ulgomvSx27wx2hcwNjCLVrf_AteQO9I)](https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNq9Vm1PGzkQ_ivW9ksRu9leQo82OiFR3so1R3MsLdIBqia2N3Hj2CvbS5oS_vuNYy9LoEhIJy4fovHs-Jn3Z_cmoZrxpJ-UUs_pBIwjg9NLdakI_sL_57IUlH_7Yrl5XUK_hKxGkfwxMvkO-Uv_GQwEyKAK5uRLa7MHI8nZBsmyneWwNpXkQbUkg92TrJgLRyc3AXlUC8mEGoebA00bVLJrOESRnHA312YajwHgtgmaSkGnZPe8yM6OzsllMnGusv08Hws3qUcdqmf5TChhnVno8nttHUabM15JvZhx5TI3nl8mAaoNz8dOluR4GH1-5LLiZvlVM8jOd09ex8KAMXpuM5Au2PnnpVY8nNAwCBsbAX8FenxUNHXSSnHqxLVwC69-CvVYOW4Uj6cjcHwOC1Jwc-0Lv-YhFMO7aAvBLJvp7x1wEqwVoDoIlc_FVOS2AsptPjw7G54ff8orGOOpu7X9duvtu-2t7bxxvBl9bkafm-igqZn35Rv9dXjyIC2tltiRi5CTAcX0rOnteUHOUGPFek5XAdL3MUDuNRecAzrx7Vr6Rp8MPjwFuzYqAw0sSB9AgqLcRA8RxHs52CsiFq1H3AbzQzBjDCnAHmDdcGja7BwIdTfsa22I8Lgkn7P9j3vD31YtP91vXDBwMAIbrf2DZq0Wxd-DKO-vG4VCYepEctTahz66_4OP3sv5wPqvwNua3WtHSzrhWTwfF3vZp4PdeKJNR67u74DHfSYZWAdlmTHu-5gxZTM2oVUmVGmw8aamrja8GfdH4XafH-4T8T6C7P0nyF-MYLZT9JBq6ZS7i6JHPqykpksetBCOE1wlUlBdNUtAjjgi4howUhpcsqE2DuSvxu8l8Xsvgx-GJKjuc6XvvB8BYDgnndVkdGxY8U6cl85YX3fqaY5mfioCHiBhS41kpC48DYUABisFOeVjJMOGpK5BSBgJiaRP_rl7V_A6m3Prsu5afC3qvRhR2YEZ_NRqNc8w0rXLUJmPpR6BfDC4uVl5t9_gZ94MMfVvgn1eenxSCin7rw4P379_8ybFa3rK-696vV6Us7lgbtLvVj_u3fUUnUYSTXF-03bcWrHbir30UJs5GMaNTZEt0kGNZJ626aV3DfYxBU_8h3_7YEKx_vbiIGoa6q2rSgpu4oqAwvcXW2Plqwf5PoLMqJa6NrEI77Z4j_3-7CI8QkvbD4i0-VR40meSJjNuZiAYfo3deNzLxE34DKmmjyLjJdTS-ZbdomldIefyAyacNgmSg7Q8TaB2ulgomvSx27wx2hcwNjCLVrf_AteQO9I)

[diagram source](https://mermaid-js.github.io/mermaid-live-editor/edit?gist=https://mermaid-js.github.io/mermaid-live-editor/edit#pako:eNq9Vm1PGzkQ_ivW9ksRu9leQo82OiFR3so1R3MsLdIBqia2N3Hj2CvbS5oS_vuNYy9LoEhIJy4fovHs-Jn3Z_cmoZrxpJ-UUs_pBIwjg9NLdakI_sL_57IUlH_7Yrl5XUK_hKxGkfwxMvkO-Uv_GQwEyKAK5uRLa7MHI8nZBsmyneWwNpXkQbUkg92TrJgLRyc3AXlUC8mEGoebA00bVLJrOESRnHA312YajwHgtgmaSkGnZPe8yM6OzsllMnGusv08Hws3qUcdqmf5TChhnVno8nttHUabM15JvZhx5TI3nl8mAaoNz8dOluR4GH1-5LLiZvlVM8jOd09ex8KAMXpuM5Au2PnnpVY8nNAwCBsbAX8FenxUNHXSSnHqxLVwC69-CvVYOW4Uj6cjcHwOC1Jwc-0Lv-YhFMO7aAvBLJvp7x1wEqwVoDoIlc_FVOS2AsptPjw7G54ff8orGOOpu7X9duvtu-2t7bxxvBl9bkafm-igqZn35Rv9dXjyIC2tltiRi5CTAcX0rOnteUHOUGPFek5XAdL3MUDuNRecAzrx7Vr6Rp8MPjwFuzYqAw0sSB9AgqLcRA8RxHs52CsiFq1H3AbzQzBjDCnAHmDdcGja7BwIdTfsa22I8Lgkn7P9j3vD31YtP91vXDBwMAIbrf2DZq0Wxd-DKO-vG4VCYepEctTahz66_4OP3sv5wPqvwNua3WtHSzrhWTwfF3vZp4PdeKJNR67u74DHfSYZWAdlmTHu-5gxZTM2oVUmVGmw8aamrja8GfdH4XafH-4T8T6C7P0nyF-MYLZT9JBq6ZS7i6JHPqykpksetBCOE1wlUlBdNUtAjjgi4howUhpcsqE2DuSvxu8l8Xsvgx-GJKjuc6XvvB8BYDgnndVkdGxY8U6cl85YX3fqaY5mfioCHiBhS41kpC48DYUABisFOeVjJMOGpK5BSBgJiaRP_rl7V_A6m3Prsu5afC3qvRhR2YEZ_NRqNc8w0rXLUJmPpR6BfDC4uVl5t9_gZ94MMfVvgn1eenxSCin7rw4P379_8ybFa3rK-696vV6Us7lgbtLvVj_u3fUUnUYSTXF-03bcWrHbir30UJs5GMaNTZEt0kGNZJ626aV3DfYxBU_8h3_7YEKx_vbiIGoa6q2rSgpu4oqAwvcXW2Plqwf5PoLMqJa6NrEI77Z4j_3-7CI8QkvbD4i0-VR40meSJjNuZiAYfo3deNzLxE34DKmmjyLjJdTS-ZbdomldIefyAyacNgmSg7Q8TaB2ulgomvSx27wx2hcwNjCLVrf_AteQO9I)

## ISC Kea version

The version of ISC Kea is built from the dockerfile [here](https://github.com/ministryofjustice/staff-device-dhcp-server/blob/fa383451a1bd0f58813e04c5076c90620189f5aa/dhcp-service/Dockerfile#L7).

## Documentation

- [Getting Started](/documentation/getting-started.md)
- [High Availability Configuration](/documentation/high-availability.md)
- [High Availability Testing](/documentation/high-availability-testing.md)
- [Performance Testing](/documentation/performance-metrics.md)
- [Health Checks](/documentation/health-checks.md)
- [Monitoring](/documentation/monitoring.md)
- [Deployment](/documentation/deployment.md)

## Notes

Kea currently does not support connecting to the database over SSL. See [kea#15](https://github.com/isc-projects/kea/pull/15)
